<div th:fragment="content">
  <fieldset>
    <legend>Modulex</legend>

    <!-- Filters -->
    <div class="row mb-2">
      <div class="col-md">
        <select id="filterFiliere" class="form-select">
          <option value="">Toutes les filieres</option>
          <option th:each="f : ${filieres}" th:value="${f.codeFiliere}" th:text="${f.nomFiliere}"></option>
        </select>
      </div>
      <div class="col-md">
        <select id="filterCoord" class="form-select">
          <option value="">Tous les coordonateurs</option>
          <option th:each="e : ${employes}" th:value="${e.cin}" th:text="${e.nom + ' ' + e.prenom}"></option>
        </select>
      </div>
      <div class="col-md">
        <input id="filterDepart" type="text" class="form-control" placeholder="Département">
      </div>
    </div>

    <div class="mb-3">
      <button id="openModalBtn" class="btn btn-primary">Ajouter Module</button>
    </div>

    <div class="scrollable" id="modulexTableContainer">
      <table id="modulexTable" class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Actions</th>
            <th>Code Module</th>
            <th>Nom Module</th>
            <th>Description</th>
            <th>Nombre Heures</th>
            <th>Coefficient</th>
            <th>Filiere</th>
            <th>Département</th>
            <th>Coordonateur</th>
            <th>Option</th>
            <th>Semestre</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <!-- Add this right after the table (or table container) -->
    <nav id="modulexPagination" class="mt-2" aria-label="Modulex pagination"></nav>

    <!-- Modal skeleton -->
    <div id="modulexModal" class="modal" style="display:none">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Ajouter/Modifier Module</h4>
          <span class="close" style="cursor:pointer">&times;</span>
        </div>
        <form id="modulexForm" data-mode="add">
          <input type="hidden" name="id"/>
          <div><label>Code Module:</label><input type="text" name="codeModule" class="form-control" required/></div>
          <div><label>Nom Module:</label><input type="text" name="nomModule" class="form-control" required/></div>
          <div><label>Filiere:</label>
            <select name="codeFiliere" class="form-select">
              <option th:each="f : ${filieres}" th:value="${f.codeFiliere}" th:text="${f.nomFiliere}"></option>
            </select>
          </div>
          <div><label>Coordonateur:</label>
            <select name="coordonateurCin" class="form-select">
              <option th:each="e : ${employes}" th:value="${e.cin}" th:text="${e.nom + ' ' + e.prenom}"></option>
            </select>
          </div>
          <div><label>Description:</label><input type="text" name="description" class="form-control"/></div>
          <div><label>Nombre Heures:</label><input type="number" name="nombreHeures" class="form-control"/></div>
          <div><label>Coefficient:</label><input type="number" step="0.01" name="coefficient" class="form-control"/></div>
          <div><label>Département:</label><input type="text" name="departementDattache" class="form-control"/></div>
          <div><label>Semestre:</label><input type="number" name="semestre" class="form-control"/></div>
          <div><label>Option:</label><input type="text" name="optionModule" class="form-control"/></div>
          <button type="submit" class="btn btn-success mt-2" id="submitBtn">Enregistrer</button>
        </form>
      </div>
    </div>
  </fieldset>
</div>
